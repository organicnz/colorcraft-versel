#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run lint-staged to lint and fix staged files
npx lint-staged

# Run type check on the whole project
npm run type-check

# Check for Vercel deployment issues
echo "Checking for recent Vercel deployment issues..."
if [ -f "logs/vercel_errors_$(date +%Y%m%d).txt" ]; then
  ERROR_COUNT=$(grep -c "ERRORS DETECTED" "logs/vercel_errors_$(date +%Y%m%d).txt")
  if [ "$ERROR_COUNT" -gt 0 ]; then
    echo "⚠️ Warning: Vercel deployment errors detected today!"
    echo "Please run 'npm run logs:analyze' to check deployment issues before pushing."
    # Not blocking the commit, but warning the developer
  fi
fi 